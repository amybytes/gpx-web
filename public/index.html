<!DOCTYPE html>
<html lang="en">
<head>
    <title>GPX Web</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="This is a simple interface for interacting with GPX files on a server.">
    <meta name="keywords" content="gpx">
    <meta name="author" content="Ethan Rowan">
    <!-- Load jquery, bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="/style.css">
    <!-- Custom CSS End -->
</head>
<body>
    <h2>File Log</h2>
    <h5 id="noFileHeader">No files</h5>
    <div id="fileLog" class="hiddenView log">
        <table id="fileLogTable">
            <tr>
                <th>Name</th>
                <th>Version</th>
                <th>Creator</th>
                <th>Number of waypoints</th>
                <th>Number of routes</th>
                <th>Number of tracks</th>
            </tr>
        </table>
    </div>

    <div id="uploadGpx">
        <h4>Upload GPX File</h4>
        <form ref="uploadForm"
            id="uploadForm"
            action="/upload"
            method="post"
            encType="multipart/form-data">
            <div class="form-group">
                <input type="file" accept=".gpx" id="uploadFile" name="uploadFile" class="btn btn-secondary" autocomplete="off">
                <input type="submit" value='Upload' class="btn btn-secondary">
            </div>
        </form>
    </div>

    <hr>

    <h2>GPX View</h2>
    <h5 id="noFileSelectedHeader">No file selected</h5>
    <select id="gpxViewFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
        <option value="" selected disabled hidden/>Select a GPX file...</option>
    </select>
    <h5 id="noComponentsHeader" class="hiddenView" style="margin-top: 5px">No components</h5>
    <div id="gpxView" class="hiddenView log">
        <table id="gpxViewTable">
            <tr>
                <th>Component</th>
                <th>Name</th>
                <th>Number of points</th>
                <th>Length</th>
                <th>Loop</th>
                <th>Actions</th>
            </tr>
        </table>
    </div>

    <hr>

    <h2 id="actionsHeader">Actions</h2>
    <ul style="padding: 0">
        <input type="button" value="Create GPX" class="btn btn-secondary gridInput" onclick="showCreateGPXAction();">
        <input type="button" value="Add route" class="btn btn-secondary gridInput" onclick="showAddRouteAction();">
        <input type="button" value="Find path" class="btn btn-secondary gridInput" onclick="showFindPathAction();">
        <input type="button" value="Get components with length" class="btn btn-secondary gridInput" onclick="showNumComponentsAction();">
    </ul>

    <div id="createGpx" class="actionDiv">
        <h4>Create GPX File</h4>
        <form ref="createForm" id="createForm">
            <div class="form-group">
                <label id="createGpxName" for="createGpxNameEntry">File name</label>
                <input type="text" class="form-control" id="createGpxNameEntry" placeholder="new.gpx" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a file name ending in '.gpx'.
                </div>
            </div>
            <div class="form-group">
                <label id="createGpxVersion" for="createGpxVersionEntry">Version</label>
                <input type="text" class="form-control" id="createGpxVersionEntry" placeholder="version" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a version number.
                </div>
            </div>
            <div class="form-group">
                <label id="createGpxCreator" for="createGpxCreatorEntry">Creator</label>
                <input type="text" class="form-control" id="createGpxCreatorEntry" placeholder="creator" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a creator name.
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Create GPX" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="addRoute" class="actionDiv">
        <h4>Add Route to GPX File</h4>
        <form ref="addRouteForm" id="addRouteForm">
            <!-- GPX file selector -->
            <div class="form-group">
                <select id="addRouteFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
                    <option value="" class="dropdown-item" selected disabled hidden/>Select a GPX file...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a file.
                </div>
            </div>
            <div class="form-group">
                <label id="addRouteName" for="addRouteNameEntry">Route name</label>
                <input type="text" class="form-control" id="addRouteNameEntry" placeholder="default: None" autocomplete="off">
            </div>
            <!-- Waypoints grid -->
            <label id="addRouteName">Waypoints</label>
            <div class="form-group">
                <div id="addRouteWaypointGrid">
                    
                </div>
                <input type="button" id="btnAddWpt" value="Add extra waypoint" class="btn btn-secondary">
            </div>
            <div class="form-group">
                <input type="submit" value="Add route" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="findPath" class="actionDiv">
        <h4>Find Path</h4>
        <!-- Output table -->
        <div id="findPathView" class="hiddenView log">
            <table id="findPathTable">
                <tr>
                    <th>Component</th>
                    <th>Name</th>
                    <th>Number of points</th>
                    <th>Length</th>
                    <th>Loop</th>
                </tr>
            </table>
        </div>
        <form ref="findPathForm" id="findPathForm">
            <!-- Waypoints grid -->
            <div class="form-group">
                <h5>Start point</h5>
                <div class="row">
                    <div class="col">
                        <input type="text" id="startLatInput" class="form-control gridInput" placeholder="latitude" autocomplete="off">
                    </div>
                    <div class="col">
                        <input type="text" id="startLonInput" class="form-control gridInput" placeholder="longitude" autocomplete="off">
                    </div>
                </div>
                <h5>End point</h5>
                <div class="row">
                    <div class="col">
                        <input type="text" id="endLatInput" class="form-control gridInput" placeholder="latitude" autocomplete="off">
                    </div>
                    <div class="col">
                        <input type="text" id="endLonInput" class="form-control gridInput" placeholder="longitude" autocomplete="off">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <h5>Tolerance</h5>
                <input type="text" id="toleranceInput" class="form-control gridInput" placeholder="tolerance" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a non-negative tolerance.
                </div>
            </div>
            <div class="form-group">
                <p id="foundPathText" class="hiddenView"></p>
                <input type="submit" value="Find path" class="btn btn-secondary">
            </div>
        </form>
    </div>
    
    <div id="rename" class="actionDiv">
        <h4>Rename</h4>
        <form ref="renameForm" id="renameForm">
            <div class="form-group">
                <label id="renameNewName" for="renameNewNameEntry">New name</label>
                <input type="text" class="form-control" id="renameNewNameEntry" placeholder="new name" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a new name.
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Rename" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="numComponents" class="actionDiv">
        <h4>Get Components with Length</h4>
        <form ref="numComponentsForm" id="numComponentsForm">
            <div class="form-group">
                <label id="numComponentsLength" for="numComponentsLengthEntry">Length</label>
                <input type="text" class="form-control" id="numComponentsLengthEntry" placeholder="length" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a length.
                </div>
            </div>
            <div class="form-group">
                <label id="numComponentsTolerance" for="numComponentsToleranceEntry">Tolerance</label>
                <input type="text" id="numComponentsToleranceEntry" class="form-control gridInput" placeholder="tolerance" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a non-negative tolerance.
                </div>
            </div>
            <div class="form-group">
                <p id="getLengthText" class="hiddenView"></p>
                <input type="submit" value="Rename" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <hr>

    <h2>Database</h2>
    <div id="dbActions" class="hiddenView">
        <ul style="padding: 0">
            <input type="button" value="Store all files" class="btn btn-secondary" onclick="storeAllFilesInDB();">
            <input type="button" value="Clear all data" class="btn btn-secondary" onclick="clearAllFilesInDB();">
            <!-- <input type="button" value="Execute Query" class="btn btn-secondary" onclick="showExecuteQueryAction();"> -->
        </ul>
    </div>

    <div id="login" class="dbActionDiv">
        <h4>Login</h4>
        <form ref="dbLoginForm" id="dbLoginForm">
            <div class="form-group">
                <label id="loginUsername" for="loginUsernameEntry">Username</label>
                <input type="text" class="form-control" id="loginUsernameEntry" placeholder="username" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a username.
                </div>
            </div>
            <div class="form-group">
                <label id="loginPassword" for="loginPasswordEntry">Password</label>
                <input type="text" class="form-control" id="loginPasswordEntry" placeholder="password" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a password.
                </div>
            </div>
            <div class="form-group">
                <label id="loginDatabaseName" for="loginDatabaseNameEntry">Database name</label>
                <input type="text" class="form-control" id="loginDatabaseNameEntry" placeholder="database name" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter a database name.
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Login" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="queries" class="dbActionDiv hiddenView">
        <h4>Queries</h4>
        <ul style="padding: 0">
            <input type="button" value="Get all routes" class="btn btn-secondary gridInput" onclick="showQuery1();">
            <input type="button" value="Get routes from file" class="btn btn-secondary gridInput" onclick="showQuery2();">
            <input type="button" value="Get all route points" class="btn btn-secondary gridInput" onclick="showQuery3();">
            <input type="button" value="Get all points from file" class="btn btn-secondary gridInput" onclick="showQuery4();">
            <input type="button" value="Get shortest/longest routes from file" class="btn btn-secondary gridInput" onclick="showQuery5();">
        </ul>
    </div>

    <div id="allRoutesQuery" class="dbquery">
        <h4>Query: Get all routes</h4>
        <div id="allRoutesQueryOutput" class="hiddenView">
            <table id="allRoutesQueryTable">
                <tr>
                    <th>Component</th>
                    <th>Name</th>
                    <th>Number of points</th>
                    <th>Length</th>
                    <th>Loop</th>
                </tr>
            </table>
        </div>
        <form ref="allRoutesQueryForm" id="allRoutesQueryForm">
            <div class="form-group">
                <label id="allRoutesQuerySort" for="allRoutesQuerySortSelect">Sort by</label>
                <select id="allRoutesQuerySortSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Route name"/>Route name</option>
                    <option value="Length"/>Length</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Execute Query" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="specificRoutesQuery" class="dbquery">
        <h4>Query: Get routes from file</h4>
        <div id="specificRoutesQueryOutput" class="hiddenView">
            <table id="specificRoutesQueryTable">
                <tr>
                    <th>Name</th>
                    <th>Length</th>
                </tr>
            </table>
        </div>
        <form ref="specificRoutesQueryForm" id="specificRoutesQueryForm">
            <div class="form-group">
                <select id="specificRoutesQueryFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
                    <option value="" selected disabled hidden/>Select a GPX file...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a file.
                </div>
            </div>
            <div class="form-group">
                <label id="specificRoutesQuerySort" for="specificRoutesQuerySortSelect">Sort by</label>
                <select id="specificRoutesQuerySortSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Route name"/>Route name</option>
                    <option value="Length"/>Length</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Execute Query" class="btn btn-secondary">
            </div>
        </form>
    </div>
    
    <div id="routePointsQuery" class="dbquery">
        <h4>Query: Get all route points</h4>
        <div id="routePointsQueryOutput" class="hiddenView">
            <table id="routePointsQueryTable">
                <tr>
                    <th>Point</th>
                    <th>Name</th>
                    <th>Index</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                </tr>
            </table>
        </div>
        <form ref="routePointsQueryForm" id="routePointsQueryForm">
            <div class="form-group">
                <select id="routePointsQueryFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
                    <option value="" selected disabled hidden/>Select a GPX file...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a file.
                </div>
            </div>
            <div class="form-group">
                <select id="routePointsQueryRouteSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="" selected disabled hidden/>Select a route...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a route.
                </div>
            </div>
            <div class="form-group">
                <label id="routePointsQuerySort" for="routePointsQuerySortSelect">Sort by</label>
                <select id="routePointsQuerySortSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Route name"/>Route name</option>
                    <option value="Length"/>Length</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Execute Query" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="allFilePointsQuery" class="dbquery">
        <h4>Query: Get all points from file</h4>
        <div id="allFilePointsQueryOutput" class="hiddenView">
            <table id="allFilePointsQueryTable">
                <tr>
                    <th>Point</th>
                    <th>Name</th>
                    <th>Index</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                </tr>
            </table>
        </div>
        <form ref="allFilePointsQueryForm" id="allFilePointsQueryForm">
            <div class="form-group">
                <select id="allFilePointsQueryFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
                    <option value="" selected disabled hidden/>Select a GPX file...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a file.
                </div>
            </div>
            <div class="form-group">
                <label id="allFilePointsQuerySort" for="allFilePointsQuerySortSelect">Sort by</label>
                <select id="allFilePointsQuerySortSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Route name"/>Route name</option>
                    <option value="Length"/>Length</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Execute Query" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <div id="shortestLongestRoutesQuery" class="dbquery">
        <h4>Query: Get shortest/longest routes from file</h4>
        <div id="shortestLongestRoutesQueryOutput" class="hiddenView">
            <table id="shortestLongestRoutesQueryTable">
                <tr>
                    <th>Name</th>
                    <th>Length</th>
                </tr>
            </table>
        </div>
        <form ref="shortestLongestRoutesQueryForm" id="shortestLongestRoutesQueryForm">
            <div class="form-group">
                <select id="shortestLongestRoutesQueryFileSelect" class="form-control gpxSelect" style="width: 35%" autocomplete="off">
                    <option value="" selected disabled hidden/>Select a GPX file...</option>
                </select>
                <div class="invalid-feedback">
                    You must select a file.
                </div>
            </div>
            <div class="form-group">
                <label id="shortestLongestRoutesQueryNumRoutes" for="shortestLongestRoutesQueryNumRoutesEntry">Number of routes</label>
                <input type="text" class="form-control" id="shortestLongestRoutesQueryNumRoutesEntry" placeholder="number of routes" autocomplete="off">
                <div class="invalid-feedback">
                    You must enter the number of routes.
                </div>
            </div>
            <div class="form-group">
                <label id="shortestLongestRoutesQueryType" for="shortestLongestRoutesQueryTypeSelect">Shortest/Longest</label>
                <select id="shortestLongestRoutesQueryTypeSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Shortest"/>Shortest</option>
                    <option value="Longest"/>Longest</option>
                </select>
            </div>
            <div class="form-group">
                <label id="shortestLongestRoutesQuerySort" for="shortestLongestRoutesQuerySortSelect">Sort by</label>
                <select id="shortestLongestRoutesQuerySortSelect" class="form-control" style="width: 35%" autocomplete="off">
                    <option value="Route name"/>Route name</option>
                    <option value="Length"/>Length</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Execute Query" class="btn btn-secondary">
            </div>
        </form>
    </div>

    <!-- Leave me at the bottom of body -->
    <script src="/index.js"></script>
</body>
</html>
